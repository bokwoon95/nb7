<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="data:,">
<link rel="stylesheet" href="/admin/static/tachyons.min.css">
<link rel="stylesheet" href="/admin/static/styles.css">
<script type="module" src="/admin/static/dismiss-alert.js"></script>
<script type="module" src="/admin/static/go-back.js"></script>
<title>Create file</title>
<body class="centered-body">
<nav class="mv2 bg-dark-cyan white flex justify-between items-center">
    <a href="https://notebrew.com/" class="ma2">notebrew🖋️☕</a>
    <span class="flex-grow-1"></span>
    <a href="" class="ma2">site</a>
    <a href="" class="ma2">{{ if username }}@{{ username }}{{ else }}user{{ end }}</a>
    <a href="/admin/logout/" class="ma2">logout</a>
</nav>
{{- if eq $.Status.Code "NB-03140" "NB-03150" }}
<div class="mv5 w-80 w-70-m w-60-l center">
    {{- if referer }}
    <div><a href="{{ referer }}" class="linktext" data-go-back>&larr; back</a></div>
    {{- end }}
    <div class="mv3 b tc">Can't create a file here.</div>
</div>
{{- else }}
{{- if and $.Status (ne $.Status.Code "NB-00000") }}
{{- if $.Status.Success }}
<div role="alert" class="alert-success mv2 pa2 br2 flex items-center">
    <div>{{ safeHTML $.Status.Message }}</div>
    <div class="flex-grow-1"></div>
    <button class="f3 bg-transparent bn color-success o-70 hover-black" data-dismiss-alert>&times;</button>
</div>
{{- else }}
<div role="alert" class="alert-danger mv2 pa2 br2 flex items-center">
    <div>{{ safeHTML $.Status.Message }}</div>
    <div class="flex-grow-1"></div>
    <button class="f3 bg-transparent bn color-success o-70 hover-black" data-dismiss-alert>&times;</button>
</div>
{{- end }}
{{- end }}
<div class="mv2">
    {{- if referer }}
    <a href="{{ referer }}" class="linktext" data-go-back>&larr; back</a>
    <span>&boxv;</span>
    {{- end }}
    {{- if ne $.ParentFolder "public/themes" }}
    <a href="/{{ join `admin` sitePrefix $.ParentFolder }}/" class="linktext">{{ base $.ParentFolder }}</a>
    <span>&boxv;</span>
    {{- end }}
    <a href="/{{ join `admin` sitePrefix `public/themes` }}/" class="linktext">themes</a>
    <span>&boxv;</span>
    <a href="/{{ join `admin` sitePrefix }}/" class="linktext">admin</a>
</div>
<h1 class="f3 mv2 b">Create file</h1>
<ul>
    {{- range $templateError := $.TemplateErrors }}
    <li class="invalid-red list-style-disc">{{ safeHTML $templateError }}</li>
    {{- end }}
</ul>
<form method="post" action="/{{ join `admin` sitePrefix `createfile` }}/">
    <input type="hidden" name="parentFolder" value="{{ $.ParentFolder }}">
    <input type="hidden" name="type" value="{{ $.Type }}">
    <div class="mv2">
        <div><label for="name" class="b">Name:</label></div>
        <div class="flex items-center">
            <input id="name" name="name" value="{{ $.Name }}" class="pv1 ph2 br2 ba flex-grow-1">
            <span class="mh1">.html</span>
        </div>
    </div>
    <div class="mv2">
        <div><label for="content" class="b">Content:</label></div>
        <textarea id="content" name="content" dir="auto" class="w-100 pa2 min-h5 h6 resize-vertical" data-codemirror>{{ $.Content }}</textarea>
    </div>
    <button type="submit" class="button ba br2 pa2 mv3 w-100">Create file</button>
</form>
{{- end }}
